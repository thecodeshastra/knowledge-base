"use strict";(globalThis.webpackChunksite=globalThis.webpackChunksite||[]).push([[708],{3298(e,n,s){s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"virtual_env/uv","title":"Uv","description":"uv is a fast Python package & environment manager","source":"@site/../docs/virtual_env/uv.md","sourceDirName":"virtual_env","slug":"/virtual_env/uv","permalink":"/knowledge-base/docs/virtual_env/uv","draft":false,"unlisted":false,"editUrl":"https://github.com/thecodeshastra/knowledge-base/tree/main/site/../docs/virtual_env/uv.md","tags":[],"version":"current","frontMatter":{"title":"Uv"},"sidebar":"docsSidebar","previous":{"title":"Tox","permalink":"/knowledge-base/docs/virtual_env/tox-env"}}');var i=s(4848),r=s(8453);const c={title:"Uv"},a="Uv",t={},d=[{value:"Why use uv?",id:"why-use-uv",level:2},{value:"How to install",id:"how-to-install",level:2},{value:"Linux / macOS",id:"linux--macos",level:4},{value:"Windows",id:"windows",level:4},{value:"Shell auto completion",id:"shell-auto-completion",level:4},{value:"1\ufe0f\u20e3 Create a virtual environment",id:"1\ufe0f\u20e3-create-a-virtual-environment",level:2},{value:"2\ufe0f\u20e3 Initialize a project",id:"2\ufe0f\u20e3-initialize-a-project",level:2},{value:"3\ufe0f\u20e3 Add dependencies",id:"3\ufe0f\u20e3-add-dependencies",level:2},{value:"4\ufe0f\u20e3 Install / sync dependencies",id:"4\ufe0f\u20e3-install--sync-dependencies",level:2},{value:"5\ufe0f\u20e3 Install from requirements.txt (legacy)",id:"5\ufe0f\u20e3-install-from-requirementstxt-legacy",level:2},{value:"6\ufe0f\u20e3 Run Python or scripts",id:"6\ufe0f\u20e3-run-python-or-scripts",level:2},{value:"7\ufe0f\u20e3 Update dependencies",id:"7\ufe0f\u20e3-update-dependencies",level:2},{value:"8\ufe0f\u20e3 Remove a dependency",id:"8\ufe0f\u20e3-remove-a-dependency",level:2},{value:"9\ufe0f\u20e3 Delete environment",id:"9\ufe0f\u20e3-delete-environment",level:2},{value:"\ud83d\udd01 One Real Project Example",id:"-one-real-project-example",level:2},{value:"\ud83e\udde0 Daily workflow to remember",id:"-daily-workflow-to-remember",level:2},{value:"\ud83d\udea8 Best practices",id:"-best-practices",level:2},{value:"\ud83e\udde0 Memory trick",id:"-memory-trick",level:2},{value:"Resources",id:"resources",level:2}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"uv",children:"Uv"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"uv"})," is a ",(0,i.jsx)(n.strong,{children:"fast Python package & environment manager"})]}),"\n",(0,i.jsxs)(n.p,{children:["It replaces: ",(0,i.jsx)(n.code,{children:"pip"}),", ",(0,i.jsx)(n.code,{children:"pip-tools"}),", and partially ",(0,i.jsx)(n.code,{children:"venv"})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"why-use-uv",children:"Why use uv?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u26a1 Extremely fast (Rust-based)"}),"\n",(0,i.jsx)(n.li,{children:"\ud83d\udce6 pip-compatible"}),"\n",(0,i.jsx)(n.li,{children:"\ud83d\udd12 Lock files for reproducibility"}),"\n",(0,i.jsx)(n.li,{children:"\ud83e\uddfc Safe with system Python (PEP 668 friendly)"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"how-to-install",children:"How to install"}),"\n",(0,i.jsx)(n.h3,{id:""}),"\n",(0,i.jsx)(n.h4,{id:"linux--macos",children:"Linux / macOS"}),"\n",(0,i.jsx)(n.p,{children:"Use curl to download the script and execute it with sh:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -LsSf https://astral.sh/uv/install.sh | sh\n"})}),"\n",(0,i.jsx)(n.p,{children:"If your system doesn't have curl, you can use wget:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"wget -qO- https://astral.sh/uv/install.sh | sh\n"})}),"\n",(0,i.jsx)(n.p,{children:"Request a specific version by including it in the URL:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -LsSf https://astral.sh/uv/0.9.26/install.sh | sh\n"})}),"\n",(0,i.jsx)(n.h4,{id:"windows",children:"Windows"}),"\n",(0,i.jsx)(n.p,{children:"Use irm to download the script and execute it with iex:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:'powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"\n'})}),"\n",(0,i.jsx)(n.p,{children:"Changing the execution policy allows running a script from the internet."}),"\n",(0,i.jsx)(n.p,{children:"Request a specific version by including it in the URL:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:'powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/0.9.26/install.ps1 | iex"\n'})}),"\n",(0,i.jsx)(n.h4,{id:"shell-auto-completion",children:"Shell auto completion"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"echo 'eval \"$(uv generate-shell-completion bash)\"' >> ~/.bashrc\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"if (!(Test-Path -Path $PROFILE)) {\n  New-Item -ItemType File -Path $PROFILE -Force\n}\nAdd-Content -Path $PROFILE -Value '(& uv generate-shell-completion powershell) | Out-String | Invoke-Expression'\n"})}),"\n",(0,i.jsxs)(n.p,{children:["To get shell completion for uvx replace ",(0,i.jsx)(n.code,{children:"uv"})," with ",(0,i.jsx)(n.code,{children:"uvx"})," in above commands."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"1\ufe0f\u20e3-create-a-virtual-environment",children:"1\ufe0f\u20e3 Create a virtual environment"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"uv venv\n\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Creates ",(0,i.jsx)(n.code,{children:".venv/"})," in current directory"]}),"\n",(0,i.jsx)(n.li,{children:"Uses correct Python automatically"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Activate it:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"source .venv/bin/activate\n\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"2\ufe0f\u20e3-initialize-a-project",children:"2\ufe0f\u20e3 Initialize a project"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"uv init\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"Creates:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"pyproject.toml"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".python-version"})," (optional)"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:".gitignore"})}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"3\ufe0f\u20e3-add-dependencies",children:"3\ufe0f\u20e3 Add dependencies"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"uv add requests pyyaml\n\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Updates ",(0,i.jsx)(n.code,{children:"pyproject.toml"})]}),"\n",(0,i.jsxs)(n.li,{children:["Updates ",(0,i.jsx)(n.code,{children:"uv.lock"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Add dev dependencies:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"uv add --dev pytest black ruff\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"4\ufe0f\u20e3-install--sync-dependencies",children:"4\ufe0f\u20e3 Install / sync dependencies"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"uv pip sync\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Installs ",(0,i.jsx)(n.strong,{children:"exact versions"})," from ",(0,i.jsx)(n.code,{children:"uv.lock"})]}),"\n",(0,i.jsx)(n.li,{children:"Removes unused packages"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"5\ufe0f\u20e3-install-from-requirementstxt-legacy",children:"5\ufe0f\u20e3 Install from requirements.txt (legacy)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"uv pip install -r requirements.txt\n\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"6\ufe0f\u20e3-run-python-or-scripts",children:"6\ufe0f\u20e3 Run Python or scripts"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"uv run python main.py\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"Run a tool:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"uv run pytest\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"(No manual activation required)"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"7\ufe0f\u20e3-update-dependencies",children:"7\ufe0f\u20e3 Update dependencies"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"uv lock --upgrade\nuv pip sync\n\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"8\ufe0f\u20e3-remove-a-dependency",children:"8\ufe0f\u20e3 Remove a dependency"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"uv remove requests\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"9\ufe0f\u20e3-delete-environment",children:"9\ufe0f\u20e3 Delete environment"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"rm -rf .venv\nuv venv\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-one-real-project-example",children:"\ud83d\udd01 One Real Project Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# create project\nmkdir demo-app && cd demo-app\n\n# initialize\nuv init\n\n# create env\nuv venv\n\n# add dependencies\nuv add requests pyyaml\n\n# activate\nsource .venv/bin/activate\n\n# use in code\npython - <<EOF\nimport requests, yaml\nprint("uv works!")\nEOF\n\n# lock & sync\nuv pip sync\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-daily-workflow-to-remember",children:"\ud83e\udde0 Daily workflow to remember"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"uv init\nuv venv\nuv add <pkg>\nuv pip sync\nuv run python app.py\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-best-practices",children:"\ud83d\udea8 Best practices"}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 Commit ",(0,i.jsx)(n.code,{children:"pyproject.toml"})," + ",(0,i.jsx)(n.code,{children:"uv.lock"})]}),"\n",(0,i.jsxs)(n.p,{children:["\u2714 Use ",(0,i.jsx)(n.code,{children:"uv run"})," instead of activating venv"]}),"\n",(0,i.jsxs)(n.p,{children:["\u274c Don\u2019t use ",(0,i.jsx)(n.code,{children:"pip install"})," directly"]}),"\n",(0,i.jsxs)(n.p,{children:["\u274c Don\u2019t edit ",(0,i.jsx)(n.code,{children:"uv.lock"})," manually"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-memory-trick",children:"\ud83e\udde0 Memory trick"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"init \u2192 venv \u2192 add \u2192 lock \u2192 sync \u2192 run"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"resources",children:"Resources"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.astral.sh/uv/",children:"UV docs"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453(e,n,s){s.d(n,{R:()=>c,x:()=>a});var l=s(6540);const i={},r=l.createContext(i);function c(e){const n=l.useContext(r);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),l.createElement(r.Provider,{value:n},e.children)}}}]);