"use strict";(globalThis.webpackChunksite=globalThis.webpackChunksite||[]).push([[5889],{7987(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"others/access_disk_partition","title":"Access Disk Partitions","description":"Be very careful. Always double-check the disk/partition. A wrong choice can wipe your OS.","source":"@site/../docs/others/access_disk_partition.md","sourceDirName":"others","slug":"/others/access_disk_partition","permalink":"/knowledge-base/docs/others/access_disk_partition","draft":false,"unlisted":false,"editUrl":"https://github.com/thecodeshastra/knowledge-base/tree/main/site/../docs/others/access_disk_partition.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Cli Scripts","permalink":"/knowledge-base/docs/linux/cli_scripts"},"next":{"title":"Encrypt Files","permalink":"/knowledge-base/docs/others/encrypt_files"}}');var l=s(4848),t=s(8453);const d={},r="Access Disk Partitions",o={},a=[{value:"Windows",id:"windows",level:2},{value:"Example - Access EFI Partition &amp; Delete Boot Loader Entry",id:"example---access-efi-partition--delete-boot-loader-entry",level:3},{value:"1. Open disk tool",id:"1-open-disk-tool",level:4},{value:"2. Select the correct disk and volume",id:"2-select-the-correct-disk-and-volume",level:4},{value:"3. Assign a drive letter to EFI partition",id:"3-assign-a-drive-letter-to-efi-partition",level:4},{value:"4. Delete unwanted boot loader folder",id:"4-delete-unwanted-boot-loader-folder",level:4},{value:"5. Cleanup: remove letter (and optional destructive actions)",id:"5-cleanup-remove-letter-and-optional-destructive-actions",level:4},{value:"Optional (destructive) operations on the selected volume",id:"optional-destructive-operations-on-the-selected-volume",level:4},{value:"Linux",id:"linux",level:2},{value:"Format a Disk &amp; Merge/Delete All Partitions",id:"format-a-disk--mergedelete-all-partitions",level:3},{value:"1. Identify the target disk",id:"1-identify-the-target-disk",level:4},{value:"2. Unmount all partitions on that disk",id:"2-unmount-all-partitions-on-that-disk",level:4},{value:"3. Delete all partitions and create a new one (fdisk)",id:"3-delete-all-partitions-and-create-a-new-one-fdisk",level:4},{value:"4. Format the new partition",id:"4-format-the-new-partition",level:4},{value:"5. Mount the partition",id:"5-mount-the-partition",level:4}];function c(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"access-disk-partitions",children:"Access Disk Partitions"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"Be very careful. Always double-check the disk/partition. A wrong choice can wipe your OS."}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"windows",children:"Windows"}),"\n",(0,l.jsx)(n.h3,{id:"example---access-efi-partition--delete-boot-loader-entry",children:"Example - Access EFI Partition & Delete Boot Loader Entry"}),"\n",(0,l.jsx)(n.p,{children:"Goal: Temporarily mount the EFI/system partition, delete a boot folder, then restore things."}),"\n",(0,l.jsx)(n.h4,{id:"1-open-disk-tool",children:"1. Open disk tool"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Open ",(0,l.jsx)(n.strong,{children:"Command Prompt as Administrator"}),"."]}),"\n",(0,l.jsx)(n.li,{children:"Start disk tool:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cmd",children:"diskpart\n"})}),"\n",(0,l.jsx)(n.h4,{id:"2-select-the-correct-disk-and-volume",children:"2. Select the correct disk and volume"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"List all disks:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cmd",children:"list disk\n"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Select the disk (example: disk 0):"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cmd",children:"sel disk 0\n"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"List volumes on that disk:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cmd",children:"list vol\n"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Select the ",(0,l.jsx)(n.strong,{children:"system/EFI"})," volume (example: volume 1):"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cmd",children:"sel vol 1\n"})}),"\n",(0,l.jsx)(n.h4,{id:"3-assign-a-drive-letter-to-efi-partition",children:"3. Assign a drive letter to EFI partition"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Assign a temporary letter (example: ",(0,l.jsx)(n.code,{children:"N"}),"):"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cmd",children:"assign letter=N\n"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:["Now the EFI partition is accessible as ",(0,l.jsx)(n.code,{children:"N:"})," in Explorer / terminal."]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"4-delete-unwanted-boot-loader-folder",children:"4. Delete unwanted boot loader folder"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Exit disk tool (stay in admin terminal):"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cmd",children:"exit\n"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Go to the EFI partition:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cmd",children:"N:\ndir        # or: ls\n"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Enter EFI directory:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cmd",children:"cd EFI\ndir\n"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Delete the folder you don\u2019t want in the boot menu:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cmd",children:"rmdir Folder_Name\n"})}),"\n",(0,l.jsx)(n.h4,{id:"5-cleanup-remove-letter-and-optional-destructive-actions",children:"5. Cleanup: remove letter (and optional destructive actions)"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Reopen ",(0,l.jsx)(n.code,{children:"diskpart"})," and select the same disk & volume again:"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cmd",children:"diskpart\nsel disk 0\nsel vol 1\n"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Remove the drive letter so it goes back to hidden system state:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cmd",children:"remove letter=N\n"})}),"\n",(0,l.jsx)(n.h4,{id:"optional-destructive-operations-on-the-selected-volume",children:"Optional (destructive) operations on the selected volume"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Delete the whole volume (even if protected):"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cmd",children:"delete volume override\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Format the volume (choose one filesystem):"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cmd",children:"format fs=NTFS\n"})}),"\n",(0,l.jsx)(n.p,{children:"or"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cmd",children:"format fs=FAT32\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"linux",children:"Linux"}),"\n",(0,l.jsx)(n.h3,{id:"format-a-disk--mergedelete-all-partitions",children:"Format a Disk & Merge/Delete All Partitions"}),"\n",(0,l.jsx)(n.p,{children:"Goal: Wipe a disk, create one new partition, format it, and mount it."}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:["Only do this on a ",(0,l.jsx)(n.strong,{children:"data disk"}),", never on your OS disk. Double-check device names."]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"1-identify-the-target-disk",children:"1. Identify the target disk"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"List disks and partitions:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"lsblk\n# or\nsudo fdisk -l\n"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Choose your target disk, e.g. ",(0,l.jsx)(n.code,{children:"/dev/sdb"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Do not touch"})," ",(0,l.jsx)(n.code,{children:"/dev/sda"})," if that\u2019s your OS drive."]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"2-unmount-all-partitions-on-that-disk",children:"2. Unmount all partitions on that disk"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"For each mounted partition (examples):"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"sudo umount /dev/sdX1\nsudo umount /dev/sdX2\nsudo umount /dev/sdX3\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Replace ",(0,l.jsx)(n.code,{children:"sdX1"}),", ",(0,l.jsx)(n.code,{children:"sdX2"}),", \u2026 with real names like ",(0,l.jsx)(n.code,{children:"sdb1"}),", ",(0,l.jsx)(n.code,{children:"sdb2"}),"."]}),"\n",(0,l.jsx)(n.h4,{id:"3-delete-all-partitions-and-create-a-new-one-fdisk",children:"3. Delete all partitions and create a new one (fdisk)"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Open ",(0,l.jsx)(n.code,{children:"fdisk"})," on the disk:"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"sudo fdisk /dev/sdX\n# example: sudo fdisk /dev/sdb\n"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Inside ",(0,l.jsx)(n.code,{children:"fdisk"})," (interactive):"]}),"\n"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"d"})," \u2192 delete a partition (repeat until no partitions left)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"g"})," \u2192 create new ",(0,l.jsx)(n.strong,{children:"GPT"})," partition table"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"n"})," \u2192 create new partition","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Press ",(0,l.jsx)(n.code,{children:"Enter"})," for default partition number"]}),"\n",(0,l.jsxs)(n.li,{children:["Press ",(0,l.jsx)(n.code,{children:"Enter"})," for default first sector"]}),"\n",(0,l.jsxs)(n.li,{children:["Press ",(0,l.jsx)(n.code,{children:"Enter"})," for default last sector (use full disk)"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"w"})," \u2192 write changes and exit"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["Now you have one new partition, e.g. ",(0,l.jsx)(n.code,{children:"/dev/sdX1"})," (",(0,l.jsx)(n.code,{children:"/dev/sdb1"}),")."]}),"\n",(0,l.jsx)(n.h4,{id:"4-format-the-new-partition",children:"4. Format the new partition"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Create an ext4 filesystem and label it (optional label ",(0,l.jsx)(n.code,{children:"mydisk"}),"):"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"sudo mkfs.ext4 /dev/sdX1 -L mydisk\n# example: sudo mkfs.ext4 /dev/sdb1 -L mydisk\n"})}),"\n",(0,l.jsx)(n.h4,{id:"5-mount-the-partition",children:"5. Mount the partition"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Create a mount point and mount it:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"sudo mkdir -p /mnt/mydisk\nsudo mount /dev/sdX1 /mnt/mydisk\n# example: sudo mount /dev/sdb1 /mnt/mydisk\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Now the new disk is available at ",(0,l.jsx)(n.code,{children:"/mnt/mydisk"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},8453(e,n,s){s.d(n,{R:()=>d,x:()=>r});var i=s(6540);const l={},t=i.createContext(l);function d(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);